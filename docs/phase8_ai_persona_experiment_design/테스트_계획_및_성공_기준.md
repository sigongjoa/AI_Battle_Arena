# Phase 8: AI 페르소나 실험 테스트 계획 및 성공 기준

## 1. 개요
본 문서는 Phase 8에서 구현될 AI 페르소나 실험의 테스트 계획 및 성공 기준을 정의합니다. 각 페르소나 AI가 의도된 플레이 스타일을 정확히 구현하고, 이를 통해 게임 QA 및 밸런스 분석에 유의미한 데이터를 제공하는지 검증하는 것을 목표로 합니다.

## 2. 테스트 목표
*   각 AI 페르소나(프로게이머, 초보자, 트롤)가 정의된 플레이 철학 및 행동 패턴을 일관되게 수행하는지 검증.
*   페르소나별 시뮬레이션 데이터가 게임의 밸런스, 난이도, 잠재적 어뷰징 패턴 분석에 활용 가능한지 평가.
*   `Phase 7`에서 구축된 QA 파이프라인이 페르소나 실험 데이터를 효과적으로 수집, 분석 및 리포팅하는지 확인.

## 3. 테스트 범위
*   **단위 테스트:** 각 페르소나별 보상 함수, `Human Error Layer` 파라미터 설정, `Action Masking` 로직 등 개별 컴포넌트의 정확성 검증.
*   **통합 테스트:** `Multi-Persona Experiment Orchestrator`를 통해 여러 페르소나 AI가 `Simulation Arena`에서 대전하고, `Log Collector`, `Metric Extractor`, `Persona Analysis & Comparison Module`을 거쳐 데이터가 올바르게 처리되는지 검증.
*   **기능 테스트:** 각 페르소나 AI가 실제 게임 시나리오에서 의도된 플레이 스타일을 보이는지 정성적/정량적으로 평가.

## 4. 테스트 시나리오 및 성공 기준

### 4.1. '프로게이머' 페르소나 테스트
*   **테스트 시나리오:**
    *   `프로게이머 AI` vs `프로게이머 AI` 대전 시뮬레이션.
    *   `프로게이머 AI` vs `초보자 AI` 대전 시뮬레이션.
    *   `프로게이머 AI`의 특정 캐릭터 플레이 시뮬레이션.
*   **성공 기준:**
    *   **승률:** `초보자 AI` 또는 다른 낮은 난이도 페르소나 대비 90% 이상의 승률 달성.
    *   **데미지 효율:** 동일 시간 대비 가장 높은 평균 초당 데미지(DPS) 기록.
    *   **실수율:** `Human Error Layer`의 `mistake_probability`, `drop_probability`가 0으로 설정된 경우, 입력 오타 및 누락이 발생하지 않음.
    *   **패턴 탐지:** 게임의 이론적 성능 한계를 보여주는 최적의 콤보 또는 특정 '버그성 플레이' 패턴을 발견하고 로그에 기록됨.

### 4.2. '초보자' 페르소나 테스트
*   **테스트 시나리오:**
    *   `초보자 AI` vs `초보자 AI` 대전 시뮬레이션.
    *   `초보자 AI` vs `프로게이머 AI` 대전 시뮬레이션.
    *   `초보자 AI`의 특정 캐릭터 플레이 시뮬레이션.
*   **성공 기준:**
    *   **승률:** `프로게이머 AI` 대비 10% 미만의 낮은 승률 기록.
    *   **실수율:** `Human Error Layer`의 설정된 `mistake_probability`, `drop_probability`에 따라 높은 빈도로 입력 오타 및 누락 발생.
    *   **액션 패턴:** `Action Masking`이 적용된 복잡한 액션(필살기, 고급 콤보)을 사용하지 않음.
    *   **진행 막힘:** 특정 게임 구간(예: 튜토리얼, 특정 스테이지)에서 높은 빈도로 진행이 막히거나 반복적인 행동을 보임.

### 4.3. '트롤' 페르소나 테스트
*   **테스트 시나리오:**
    *   `트롤 AI` vs `프로게이머 AI` 대전 시뮬레이션.
    *   `트롤 AI` vs `초보자 AI` 대전 시뮬레이션.
*   **성공 기준:**
    *   **승률:** 승패 보상이 0으로 설정된 경우, 승률이 50%에 가깝거나 의도적으로 낮은 승률을 보임.
    *   **행동 패턴:** '상대방과 멀리 떨어져 있기', '특정 방어 행동 유도', '맵 구석에 숨어있기' 등 비승리 목적의 행동 패턴을 높은 빈도로 수행.
    *   **상대방 플레이 방해:** 상대방 AI의 `ACTION_EVENT` 빈도 감소 또는 `RhythmScore` 저하 등 상대방의 플레이를 방해하는 효과가 메트릭으로 측정됨.
    *   **어뷰징 패턴 탐지:** 유저들에게 불쾌감을 줄 수 있는 특정 어뷰징 패턴(예: 무한 도망, 특정 패턴 반복)을 발견하고 로그에 기록됨.

## 5. 데이터 분석 및 리포팅 성공 기준
*   `Persona Analysis & Comparison Module`이 각 페르소나의 특성을 명확히 보여주는 메트릭(승률, 실수율, 액션 빈도, Immersion 메트릭 등)을 성공적으로 추출하고 집계.
*   `Report Generator`가 각 페르소나 실험 결과에 대한 가설 기반 리포트를 성공적으로 생성하고, 관련 로그 및 리플레이 링크를 포함.
*   생성된 리포트가 게임 디자이너에게 페르소나별 게임 플레이 특성, 밸런스 문제, 난이도 이슈, 잠재적 어뷰징 패턴에 대한 명확한 인사이트를 제공함을 확인.

## 6. 테스트 환경
*   `Phase 7`에서 구축된 `Simulation Arena` (Human Error Layer, Network Simulator 포함).
*   `Log Collector`, `Metric Extractor`, `DB Manager`.
*   `Stable-Baselines3` 기반으로 학습된 각 페르소나 AI 모델.
*   `pytest`를 활용한 단위 테스트 환경.
