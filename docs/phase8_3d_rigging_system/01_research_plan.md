# Phase 8: 3D 리깅 시스템 - 조사 계획

**목표**: 철권처럼 3D 캐릭터 애니메이션을 2D 뷰로 표현하는 시스템 구축

**상태**: 🔍 **조사 중** (구현 전)

---

## 📋 조사 항목

### 1️⃣ BVH & 애니메이션 표준 조사

#### 1.1 BVH (Biovision Hierarchy) 포맷
- [ ] BVH 파일 구조 이해
- [ ] 본(Bone) 계층 구조
- [ ] 모션 캡처 데이터 형식
- [ ] 프레임 데이터 해석

**조사 대상**:
- CMU Mocap Database 본 구조 표준
- Mixamo BVH export 옵션
- BVH 파일 크기 및 프레임 수

#### 1.2 캐릭터 모델 표준
- [ ] FBX vs GLTF vs Blend 비교
- [ ] Three.js 지원 형식
- [ ] 본 명명 규칙 (표준)
- [ ] 메시 구조

**조사 대상**:
- Mixamo 캐릭터 본 구조
- CMU 캐릭터 모델 본 구조
- 표준 본 이름 (Hips, Spine, LeftArm 등)

#### 1.3 본 매칭 (Bone Mapping)
- [ ] 자동 매칭 가능성
- [ ] 수동 매칭 프로세스
- [ ] 매칭 실패 시 처리
- [ ] 다양한 캐릭터 지원

**조사 대상**:
- Three.js BVH 로더 본 매칭 로직
- Babylon.js 본 매칭 방식
- 오픈소스 도구 (BVHacker 등)

---

### 2️⃣ 기술 검증

#### 2.1 Three.js BVH 지원
- [ ] three-bvh-loader 실제 지원 여부
- [ ] BVH → Three.js 본 구조 변환
- [ ] 애니메이션 재생 가능성
- [ ] 성능 (프레임 로드 시간)

**테스트 계획**:
```
1. Mixamo에서 무료 캐릭터 다운로드
2. BVH 1개 애니메이션 export
3. Three.js에서 로드 가능한지 테스트
4. 성능 측정 (로드 시간, FPS)
```

#### 2.2 정면 2D 뷰 구현
- [ ] 3D → 2D 프로젝션 가능성
- [ ] 카메라 위치 설정
- [ ] 깊이감 표현
- [ ] 렌더링 성능

**테스트 계획**:
```
1. Three.js OrthographicCamera 설정
2. 정면 뷰에서 3D 모델 표시
3. 깊이 정렬 (Z-order) 확인
4. 화면 해상도 최적화
```

#### 2.3 WebRTC 대역폭
- [ ] 애니메이션 프레임 정보 크기
- [ ] 전송 주기 (60 FPS?)
- [ ] 네트워크 지연 영향
- [ ] 동기화 정확도

**계산**:
```
프레임당 본 개수: ~20개
본당 데이터: 위치(3) + 회전(4) = 28 bytes
프레임 크기: 20 × 28 = 560 bytes
초당 전송: 560 × 60 = 33.6 KB/s (충분함)
```

#### 2.4 동기화 전략
- [ ] Python 게임 엔진과 Three.js 동기화
- [ ] 프레임 손실 처리
- [ ] 지연 보정
- [ ] 롤백 가능성

---

### 3️⃣ 대안 조사

#### 3.1 Three.js vs Babylon.js
- [ ] 성능 비교
- [ ] BVH 지원 정도
- [ ] 학습곡선
- [ ] 커뮤니티 크기

#### 3.2 Canvas 2D 간단 구현
- [ ] 이점: 가볍고 빠름
- [ ] 단점: 3D 모션 표현 제한
- [ ] 하이브리드 방식 가능성

#### 3.3 게임 엔진 사용
- [ ] Unity WebGL export
- [ ] Godot HTML5 export
- [ ] 오버헤드 vs 편의성

---

### 4️⃣ 설계 문제

#### 4.1 캐릭터 교체
- [ ] 다양한 캐릭터 지원 방식
- [ ] 본 구조 다를 때 처리
- [ ] 런타임 캐릭터 변경

#### 4.2 실패 처리
- [ ] BVH 로드 실패 시
- [ ] 본 매칭 실패 시
- [ ] 프레임 손실 시
- [ ] Fallback 전략

#### 4.3 성능 최적화
- [ ] 모델 메시 최적화 (폴리곤 감소)
- [ ] 본 개수 감소 가능성
- [ ] LOD (Level of Detail) 구현
- [ ] 메모리 관리

---

## 📚 조사 리소스

### 공식 문서
- [ ] Three.js 공식 문서
- [ ] Babylon.js 공식 문서
- [ ] BVH 포맷 명세
- [ ] Mixamo 문서

### 오픈소스
- [ ] three-bvh-loader (GitHub)
- [ ] babylon-bvh (GitHub)
- [ ] BVHacker (소스코드)
- [ ] CMU Mocap Tools

### 커뮤니티 & 튜토리얼
- [ ] Stack Overflow
- [ ] Three.js 포럼
- [ ] YouTube 튜토리얼
- [ ] GitHub Issues

### 게임 사례
- [ ] 철권 (본 구조 분석)
- [ ] Street Fighter (애니메이션 시스템)
- [ ] Tekken 7 기술 문서

---

## ✅ 조사 체크리스트

### Phase 1: 기초 조사 (1-2일)
- [ ] BVH 포맷 이해
- [ ] Three.js 기본 기능 확인
- [ ] Mixamo 캐릭터 다운로드
- [ ] 본 구조 표준 정리

### Phase 2: 기술 검증 (2-3일)
- [ ] Mixamo BVH export 테스트
- [ ] Three.js 로드 테스트
- [ ] 정면 뷰 렌더링 테스트
- [ ] 성능 측정

### Phase 3: 문제 분석 (1-2일)
- [ ] 발견된 문제 정리
- [ ] 해결 방안 모색
- [ ] 대안 평가
- [ ] 최적 경로 결정

### Phase 4: 설계 문서 작성 (1일)
- [ ] 기술 명세서 작성
- [ ] 구현 계획 수립
- [ ] 위험 요소 식별
- [ ] 타임라인 수립

---

## 📊 예상 일정

| Phase | 활동 | 예상 소요 기간 |
|-------|------|---|
| 1 | 기초 조사 | 1-2일 |
| 2 | 기술 검증 | 2-3일 |
| 3 | 문제 분석 | 1-2일 |
| 4 | 설계 문서 | 1일 |
| **합계** | **조사** | **5-8일** |

*이후 구현은 별도 계획*

---

## 🎯 조사 산출물

이 조사가 완료되면 다음이 산출됨:

1. **기술_명세서.md** - 선택된 기술 및 구현 방식
2. **본_매핑_명세서.md** - 캐릭터 본 구조 및 매핑 방식
3. **구현_계획.md** - 단계별 구현 로드맵
4. **위험_분석서.md** - 예상 문제 및 해결 방안
5. **POC_결과보고서.md** - 기술 검증 결과

---

**다음 단계**: 기초 조사 시작
**담당**: Claude Code
**마지막 업데이트**: 2025-11-20
