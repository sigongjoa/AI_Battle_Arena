# Phase 7: Metric Definition Document

## 1. 개요
본 문서는 Phase 7의 Metric Extractor에서 추출 및 계산되는 모든 메트릭의 정의, 계산 방식, 단위, 그리고 의미를 명확히 기술합니다. 이는 메트릭의 일관된 이해와 활용을 돕기 위함입니다.

## 2. QA 계층별 메트릭 정의

### 2.1. Stability Metrics (안정성 메트릭)

*   **StabilityScore (안정성 점수)**
    *   **정의:** 시뮬레이션 세션 동안 게임의 안정성을 나타내는 지표. 현재는 인간적 실수(Human Error) 발생 빈도에 반비례하여 계산되는 모의 값.
    *   **계산 방식 (모의):** `1.0 - (발생한 HUMAN_ERROR_INJECTED_EVENT 수 / 총 ACTION_EVENT 수)`
    *   **단위:** 없음 (0.0 ~ 1.0 사이의 정규화된 값)
    *   **의미:** 값이 높을수록 게임이 안정적으로 동작했음을 의미. 1.0에 가까울수록 오류 없이 매끄러운 플레이.

### 2.2. Balance Metrics (밸런스 메트릭)

*   **BalanceScore (밸런스 점수)**
    *   **정의:** 게임 내 캐릭터 또는 전략 간의 밸런스 정도를 나타내는 지표. 현재는 모의 값.
    *   **계산 방식 (모의):** `np.random.uniform(0.5, 1.0)` (실제로는 승률 편차, 프레임 이득 불균형 등을 통해 계산)
    *   **단위:** 없음 (0.0 ~ 1.0 사이의 정규화된 값)
    *   **의미:** 값이 높을수록 캐릭터/전략 간의 밸런스가 잘 맞춰져 있음을 의미.

### 2.3. Responsiveness Metrics (반응성 메트릭)

*   **ResponsivenessScore (반응성 점수)**
    *   **정의:** 플레이어의 입력에 대한 게임의 반응 속도 및 일관성을 나타내는 지표. 현재는 모의 값.
    *   **계산 방식 (모의):** `np.random.uniform(0.7, 1.0)` (실제로는 평균 입력 레이턴시의 역수 등을 통해 계산)
    *   **단위:** 없음 (0.0 ~ 1.0 사이의 정규화된 값)
    *   **의미:** 값이 높을수록 입력에 대한 게임의 반응이 빠르고 정확함을 의미.

## 3. Immersion & Rhythm Metrics (몰입 및 리듬 메트릭)

*   **TensionIndex (긴장감 지수)**
    *   **정의:** 플레이어 간의 탐색전 또는 공격이 오가지 않는 긴장 상태의 지속 정도를 나타내는 지표. 현재는 모의 값.
    *   **계산 방식 (모의):** `np.random.uniform(0.3, 0.9)` (실제로는 공격 간 시간 간격, 이동 패턴 등을 분석하여 계산)
    *   **단위:** 없음 (0.0 ~ 1.0 사이의 정규화된 값)
    *   **의미:** 값이 높을수록 긴장감 있는 플레이가 많이 발생했음을 의미.

*   **ComboRhythmScore (콤보 리듬 점수)**
    *   **정의:** 콤보 내 각 타격 사이의 시간 간격이 얼마나 일관되고 리드미컬하게 이어지는지를 나타내는 지표. 현재는 모의 값.
    *   **계산 방식 (모의):** `np.random.uniform(0.6, 0.95)` (실제로는 콤보 이벤트의 타임스탬프 표준편차 등을 분석하여 계산)
    *   **단위:** 없음 (0.0 ~ 1.0 사이의 정규화된 값)
    *   **의미:** 값이 높을수록 콤보가 부드럽고 리드미컬하게 연결되었음을 의미.

*   **CounterPlayScore (카운터플레이 점수)**
    *   **정의:** 상대방의 공격에 대한 반격이 얼마나 적절한 타이밍에 이루어졌는지를 나타내는 지표. 현재는 모의 값.
    *   **계산 방식 (모의):** `np.random.uniform(0.4, 0.8)` (실제로는 상대 공격 종료 시점과 내 반격 시작 시점의 시간차 등을 분석하여 계산)
    *   **단위:** 없음 (0.0 ~ 1.0 사이의 정규화된 값)
    *   **의미:** 값이 높을수록 효과적인 카운터 플레이가 많이 발생했음을 의미.

## 4. 메트릭 저장 및 관리
모든 메트릭은 `src/metric_extractor/db_manager.py`를 통해 `metrics.db` 데이터베이스에 저장됩니다. 각 메트릭은 `session_id`와 연동되어 특정 시뮬레이션 세션의 결과임을 명확히 합니다.
