# Phase 3: 테스트 계획 및 성공 기준

이 문서는 Phase 3 백엔드-프론트엔드 통합 구현의 정합성, 안정성, 성능을 검증하기 위한 테스트 계획과 성공 기준을 정의합니다.

## 1. 테스트 목표

*   백엔드 API 서버와 프론트엔드 애플리케이션 간의 통신이 명세서에 따라 정확하게 이루어지는지 검증합니다.
*   실시간 데이터(게임 상태, 학습 메트릭)가 WebSocket을 통해 지연 없이 안정적으로 교환되는지 확인합니다.
*   통합된 시스템이 사용자 시나리오에 따라 의도대로 동작하며, 예외 상황에서도 시스템이 불안정해지지 않는지 검증합니다.
*   기존 Pygame 게임 로직과 강화학습 모듈이 API 서버와 연동되어 정상적으로 실행되는지 확인합니다.

## 2. 테스트 환경

*   **하드웨어**: 로컬 개발 환경 (PC)
*   **운영체제**: Linux, Windows, macOS
*   **소프트웨어**:
    *   **백엔드**: Python 3.10+, FastAPI, Uvicorn, Pygame, Stable-Baselines3
    *   **프론트엔드**: Node.js 20.x+, Vite, React 19+
    *   **브라우저**: 최신 버전의 Chrome 또는 Firefox
    *   **API 테스트 도구**: (선택) Postman, Insomnia

## 3. 테스트 전략

테스트는 세 가지 단계로 진행합니다: 단위 테스트, 통합 테스트, 종단간(E2E) 테스트.

*   **단위 테스트 (Unit Test)**: 각 컴포넌트가 독립적으로 정확하게 동작하는지 검증합니다.
    *   **백엔드**: FastAPI의 `TestClient`를 사용하여 각 API 엔드포인트의 로직을 테스트합니다. `core` 모듈의 클래스(GameRunner, TrainingManager)들이 독립적으로 잘 작동하는지 검증합니다.
    *   **프론트엔드**: React Testing Library를 사용하여 각 컴포넌트가 Mock 데이터를 받았을 때 올바르게 렌더링되는지 테스트합니다.

*   **통합 테스트 (Integration Test)**: 백엔드와 프론트엔드를 연동하여 각 기능이 명세대로 동작하는지 검증합니다. 이 테스트가 이번 단계의 핵심입니다.

*   **종단간 테스트 (End-to-End Test)**: 실제 사용자의 입장에서 전체 시스템을 사용하는 시나리오를 수행하며 최종적으로 검증합니다.

## 4. 통합 테스트 상세 계획

| 기능 | 테스트 시나리오 | 성공 판단 기준 |
| :--- | :--- | :--- |
| **정적 데이터 로딩** | 1. 애플리케이션을 실행하고 `CharacterSelect` 화면으로 이동한다.<br>2. `MoveList` 화면으로 이동한다. | 1. 브라우저 개발자 도구의 네트워크 탭에서 `/api/characters` API 호출이 성공(200 OK)하고, 응답받은 데이터로 캐릭터 목록이 화면에 렌더링된다.<br>2. `/api/characters/{id}/moves` API 호출이 성공하고, 해당 캐릭터의 기술 정보가 정확히 표시된다. |
| **AI 매치업 분석** | 1. `MatchupAnalysis` 화면으로 이동한다. | 1. 화면 진입 시 `/api/analysis`로 `POST` 요청이 성공적으로 전송된다.<br>2. API 응답으로 받은 분석 텍스트가 화면에 올바르게 표시된다.<br>3. 프론트엔드 코드나 네트워크 요청에서 Gemini API 키가 노출되지 않는다. |
| **실시간 대전 (HUD)** | 1. 캐릭터 선택 후 대전을 시작하여 `HUD` 화면으로 진입한다.<br>2. 게임이 진행되는 것을 지켜본다.<br>3. 한쪽 플레이어의 체력이 0이 되거나 타이머가 0이 될 때까지 기다린다. | 1. `/ws/game/{match_id}` WebSocket 연결이 성공적으로 수립된다.<br>2. 체력 바, 슈퍼 게이지, 타이머가 프론트엔드의 자체 로직이 아닌, WebSocket을 통해 수신된 `game_state_update` 이벤트 데이터에 따라 실시간으로 변경된다.<br>3. 매치가 종료되면 백엔드로부터 `match_end` 이벤트를 수신하고, 결과 화면(`MatchResults`)으로 정상적으로 전환된다. |
| **실시간 학습 (Training)** | 1. `TrainingMode` 화면으로 이동한다. | 1. `/ws/training/{session_id}` WebSocket 연결이 성공적으로 수립된다.<br>2. Loss, Reward 등 학습 메트릭 관련 UI가 WebSocket을 통해 수신된 `training_metrics_update` 이벤트 데이터에 따라 실시간으로 업데이트된다.<br>3. 브라우저 콘솔에 WebSocket 관련 오류가 발생하지 않는다. |

## 5. 전체 성공 기준

아래 조건들이 모두 충족될 경우, Phase 3 통합이 성공적으로 완료된 것으로 판단합니다.

1.  **정확성**: 위에 명시된 모든 통합 테스트 시나리오의 '성공 판단 기준'을 100% 만족한다.
2.  **안정성**: 종단간 테스트 시나리오(예: 앱 실행 -> 캐릭터 선택 -> 대전 -> 결과 확인 -> 메인 메뉴)를 5회 이상 반복 수행했을 때, 시스템 크래시나 WebSocket 연결 끊김 등의 문제 없이 안정적으로 동작한다.
3.  **성능**: 실시간 대전 및 학습 모드에서 데이터 업데이트 시 눈에 띄는 지연(lag)이나 버벅임이 느껴지지 않는다. (통상 200ms 이내의 지연)
4.  **코드 품질**: 모든 단위 테스트 케이스가 통과한다.

## 6. 이슈 관리

*   테스트 과정에서 발견되는 모든 결함(Bug) 및 이슈는 GitHub Issues에 등록하여 추적하고 관리합니다.
*   각 이슈에는 재현 단계, 기대 결과, 실제 결과, 관련 로그 및 스크린샷을 포함하여 명확하게 기록합니다.
