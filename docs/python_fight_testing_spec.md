### **Python 격투 게임 프로토타입 - 테스트 명세서**

이 문서는 Python 격투 게임 프로토타입의 테스트 전략, 진행 상황 및 성공 판단 기준을 정의합니다.

---

#### **1. 테스트 환경**

*   **테스트 프레임워크:** `pytest`를 사용하여 유닛 및 통합 테스트를 작성합니다.
*   **의존성:** `pygame` (게임 실행), `pytest` (테스트 실행).
*   **테스트 데이터:** 각 테스트 케이스에 필요한 최소한의 더미 데이터 또는 모의(mock) 객체를 사용합니다.

---

#### **2. 테스트 전략**

*   **2.1 유닛 테스트 (Unit Tests):**
    *   **목적:** 각 클래스(예: `Player`, `Hitbox`, `AIController`)의 개별 메서드가 예상대로 정확히 동작하는지 검증합니다.
    *   **대상:**
        *   `Player` 클래스: `move()`, `jump()`, `attack()`, `take_damage()`, `update()` (물리 계산, 상태 전이).
        *   `Hitbox` 클래스: `update_position()`, `is_colliding()`.
        *   `AIController` 클래스: `_decide_action()` (결정 로직).
        *   `Game` 클래스: `_handle_input()` (이벤트 처리).
    *   **방법:** `pytest`를 사용하여 각 메서드의 입력과 출력을 검증하고, 필요한 경우 모의 객체를 사용하여 외부 의존성을 분리합니다.

*   **2.2 통합 테스트 (Integration Tests):**
    *   **목적:** 여러 클래스 간의 상호작용(예: `Player`와 `CollisionManager`)이 올바르게 동작하는지 검증합니다.
    *   **대상:**
        *   `CollisionManager` 클래스: `check_player_attack()` (공격 충돌 및 데미지 적용).
        *   `Game` 클래스: `_update()` (전체 게임 로직의 통합 업데이트).
    *   **방법:** 실제 객체들을 인스턴스화하여 시나리오 기반의 테스트를 수행합니다.

*   **2.3 수동/시각적 테스트 (Manual/Visual Tests):**
    *   **목적:** 게임의 전반적인 플레이 가능성, 시각적 요소, 사용자 경험(UX)을 검증합니다.
    *   **대상:**
        *   캐릭터 움직임의 부드러움, 애니메이션 전환.
        *   공격 및 피격 시 시각적 피드백.
        *   AI의 행동 패턴 및 반응성.
        *   전반적인 게임 플레이의 재미와 균형.
    *   **방법:** 개발자가 직접 게임을 플레이하며 문제점을 발견하고 개선합니다.

---

#### **3. 테스트 진행사항 및 보고**

*   **진행:** 각 개발 단계(기본 엔진, 격투 메커니즘, AI 연동)가 완료될 때마다 해당 테스트를 수행하고 결과를 기록합니다.
*   **보고:** 테스트 결과(성공/실패한 테스트 케이스, 발견된 버그)를 명확히 문서화하고, 필요시 코드 스니펫과 함께 공유합니다.

---

#### **4. 성공 판단 기준**

프로토타입의 성공은 다음 기준을 충족할 때 판단합니다.

*   **4.1 게임 실행:**
    *   Pygame 창이 오류 없이 성공적으로 실행되고 닫힙니다.
    *   두 캐릭터가 화면에 나타나고, 배경이 그려집니다.
*   **4.2 기본 조작:**
    *   P1 캐릭터가 키보드 입력에 따라 좌우 이동, 점프, 앉기 동작을 정확히 수행합니다.
*   **4.3 격투 메커니즘:**
    *   P1 캐릭터가 공격 시 공격 애니메이션(또는 시각적 피드백)이 나타납니다.
    *   공격이 상대방에게 명중하면 체력이 감소합니다.
    *   가드 동작 시 데미지가 감소하거나 방어됩니다.
*   **4.4 AI 동작:**
    *   P2 캐릭터가 독립적으로 움직이고 공격하는 등 기본적인 AI 행동을 보입니다.
    *   P2 AI가 P1 캐릭터와 상호작용(공격, 방어)을 시도합니다.
*   **4.5 AI 연동 인터페이스:**
    *   `get_game_state()` 함수가 게임 상태를 올바른 형식으로 반환합니다.
    *   `apply_ai_action()` 함수가 AI의 행동 지시를 게임에 정확히 반영합니다.
*   **4.6 안정성:**
    *   게임 플레이 중 치명적인 오류(크래시)가 발생하지 않습니다.
    *   프레임 속도가 일정 수준(예: 30 FPS 이상)으로 유지됩니다.
